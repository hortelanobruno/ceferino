<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><!-- #BeginTemplate "/Templates/maintemplate.dwt" --><!-- DW6 -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<!-- #BeginEditable "doctitle" --> 
<title>Jep Documentation - Functions</title><!-- #EndEditable --> 
<link rel="stylesheet" type="text/css" href="main.css" title="style1" />
</head>

<body bgcolor="#ffffff">

<!-- NAVIGATION ======================================================= -->
<div id="navcontainer"> 
  <ul>
    <li><a href="../javadoc/index.html" target="_blank">JavaDoc <img src="img/new-window-icon.gif" alt="new window" width="15" height="11" /></a></li>
  </ul>
  <h1>JEP</h1>
  <ul>
    <li><a href="index.html">Introduction</a></li>
    <li><a href="usage.html">Basic Usage</a></li>
    <li><a href="variables.html">Variables</a></li>
    <li><a href="types.html">Data types</a></li>
    <li><a href="operators.html">Operators</a></li>
    <li><a href="functions.html">Functions</a></li>
    <li><a href="bigdecimal.html">BigDecimal</a></li>
    <li><a href="faq.html">FAQ</a></li>
    <li><a href="migrate.html">Migration</a></li>
    <li><a href="version.html">Version History</a></li>
  </ul>
  <h1>Advanced Features</h1>
  <ul>
    <li><a href="manipulating.html">Manipulating Expressions</a></li>
    <li><a href="components.html">Components</a></li>
    <li><a href="confparser.html">Configurable Parser</a></li>
    <li><a href="serialization.html">Serialization</a></li>
    <li><a href="grammar.html">Grammar</a></li>
  </ul>
  
    <!--  <h1>Extensions</h1>
  <ul>
    <li><a href="../html/extensions/index.html">Overview</a></li>
    <li><a href="../html/extensions/xjep.html">XJep</a></li>
    <li><a href="../html/extensions/djep.html">Differentiation</a></li>
    <li><a href="../html/extensions/vectorjep.html">Vectors and Matrices</a></li>
    <li><a href="../html/extensions/rpe.html">Fast Evaluation</a></li>
    <li><a href="../html/extensions/groupjep.html">Groups</a></li>
    <li><a href="../html/extensions/version.html">Version History</a></li>
  </ul>-->
  
</div>

<!-- CENTER CONTENT ================================================== -->
<div id="centercontent">


<!-- #BeginEditable "Text" --> 
  <h1><a name="top" id="top"></a>Functions</h1>
  <p>Note that you can always add new <a href="#custom">custom functions</a>. 
    Each of the following functions can be applied to objects of the types indicated.</p>
  <p>The StandardFunctionTable includes all of these functions by default. They can also be included individually by calling <code>jep.getFunctionTable().addFunction(String, PostfixMathCommandI)</code>. All standard function classes are located in the <a href="../javadoc/com/singularsys/jep/functions/package-summary.html">jep.functions</a> package. The BigDecimal functions are kept separate in the <a href="../javadoc/com/singularsys/jep/bigdecimal/functions/package-summary.html">jep.bigdecimal.functions</a> package. </p>
  <h2>Trigonometric Functions</h2>
  <p>All functions accept arguments of the <code>Double</code> and <code>Complex</code> type, except <code>atan2</code>    which only accepts <code>Double</code> arguments.</p>
  <table border="0" cellspacing="1" cellpadding="2" bgcolor="#CCCCCC">
    <tr bgcolor="#FFFFFF">
      <td><strong>Description</strong></td>
      <td><strong>Function Name </strong></td>
      <td><strong>Class Name </strong></td>
    </tr>
    <tr bgcolor="#FFFFFF"> 
      <td width="225">Sine</td>
      <td width="150">sin(x)</td>
      <td width="150">Sine</td>
    </tr>
    <tr bgcolor="#FFFFFF"> 
      <td width="225">Cosine</td>
      <td width="150">cos(x)</td>
      <td width="150">Cosine</td>
    </tr>
    <tr bgcolor="#FFFFFF"> 
      <td width="225">Tangent</td>
      <td width="150">tan(x)</td>
      <td width="150">Tangent</td>
    </tr>
    <tr bgcolor="#FFFFFF"> 
      <td width="225">Arc Sine</td>
      <td width="150">asin(x)</td>
      <td width="150">ArcSine</td>
    </tr>
    <tr bgcolor="#FFFFFF"> 
      <td width="225">Arc Cosine</td>
      <td width="150">acos(x)</td>
      <td width="150">ArcCosine</td>
    </tr>
    <tr bgcolor="#FFFFFF"> 
      <td width="225">Arc Tangent</td>
      <td width="150">atan(x)</td>
      <td width="150">ArcTangent</td>
    </tr>
    <tr bgcolor="#FFFFFF"> 
      <td width="225">Arc Tangent (with 2 parameters)</td>
      <td width="150">atan2(y, x)</td>
      <td width="150">ArcTangent2</td>
    </tr>
    <tr bgcolor="#FFFFFF"> 
      <td width="225">Hyperbolic Sine</td>
      <td width="150">sinh(x)</td>
      <td width="150">SineH</td>
    </tr>
    <tr bgcolor="#FFFFFF"> 
      <td width="225">Hyperbolic Cosine</td>
      <td width="150">cosh(x)</td>
      <td width="150">CosineH</td>
    </tr>
    <tr bgcolor="#FFFFFF"> 
      <td width="225">Hyperbolic Tangent</td>
      <td width="150">tanh(x)</td>
      <td width="150">TanH</td>
    </tr>
    <tr bgcolor="#FFFFFF"> 
      <td width="225">Inverse Hyperbolic Sine</td>
      <td width="150">asinh(x)</td>
      <td width="150">ArcSineH</td>
    </tr>
    <tr bgcolor="#FFFFFF"> 
      <td width="225">Inverse Hyperbolic Cosine</td>
      <td width="150">acosh(x)</td>
      <td width="150">ArcCosineH</td>
    </tr>
    <tr bgcolor="#FFFFFF"> 
      <td width="225">Inverse Hyperbolic Tangent</td>
      <td width="150">atanh(x)</td>
      <td width="150">ArcTanH</td>
    </tr>
  </table>
  <h2>Log and Exponential Functions</h2>
  <p>All functions accept arguments of the Double and Complex types.</p>
  <table border="0" cellspacing="1" cellpadding="2" bgcolor="#CCCCCC">
    <tr bgcolor="#FFFFFF">
      <td><strong>Description</strong></td>
      <td><strong>Function Name </strong></td>
      <td><strong>Class Name </strong></td>
    </tr>
    <tr bgcolor="#FFFFFF"> 
      <td width="225">Natural Logarithm</td>
      <td width="150">ln(x)</td>
      <td width="150">NaturalLogarithm</td>
    </tr>
    <tr bgcolor="#FFFFFF"> 
      <td width="225">Logarithm base 10</td>
      <td width="150">log(x)</td>
      <td width="150">Logarithm</td>
    </tr>
    <tr bgcolor="#FFFFFF"> 
      <td width="225">Logarithm base 2</td>
      <td width="150">lg(x)</td>
      <td width="150">LogBase2</td>
    </tr>
    <tr bgcolor="#FFFFFF"> 
      <td width="225">Exponential (e^x)</td>
      <td width="150">exp(x)</td>
      <td width="150">Exp</td>
    </tr>
    <tr bgcolor="#FFFFFF">
      <td>Power</td>
      <td>pow(x)</td>
      <td>Power</td>
    </tr>
  </table>
  <h2>Statistical Functions</h2>
  <p>All functions accept either a vector (e.g. <code>min([1,2,3])</code>) or a set of numbers (e.g. <code>min(1,2,3)</code>).</p>
  <table border="0" cellspacing="1" cellpadding="2" bgcolor="#CCCCCC">
    <tr bgcolor="#FFFFFF">
      <td><strong>Description</strong></td>
      <td><strong>Function Name </strong></td>
      <td><strong>Class Name </strong></td>
    </tr>
    <tr bgcolor="#FFFFFF"> 
      <td width="225">Average</td>
      <td width="150">avg(x1,x2,x3,...)</td>
      <td width="150">Average</td>
    </tr>
    <tr bgcolor="#FFFFFF"> 
      <td width="225">Minimum</td>
      <td width="150">min(x1,x2,x3,...)</td>
      <td width="150">MinMax(true)</td>
    </tr>
    <tr bgcolor="#FFFFFF"> 
      <td width="225">Maximum</td>
      <td width="150">max(x1,x2,x3,...)</td>
      <td width="150">MinMax(false)</td>
    </tr>
  </table>
  <h2>Rounding Functions</h2>
    <table border="0" cellspacing="1" cellpadding="2" bgcolor="#CCCCCC">
    <tr bgcolor="#FFFFFF">
      <td><strong>Description</strong></td>
      <td><strong>Function Name </strong></td>
      <td><strong>Class Name </strong></td>
    </tr>
    <tr bgcolor="#FFFFFF"> 
      <td width="225">Round</td>
      <td width="150">round(x), round(x, p) </td>
      <td width="150">Round</td>
    </tr>
    <tr bgcolor="#FFFFFF"> 
      <td width="225">Floor</td>
      <td width="150">floor(x)</td>
      <td width="150">Floor</td>
    </tr>
    <tr bgcolor="#FFFFFF"> 
      <td width="225">Ceiling</td>
      <td width="150">ceil(x)</td>
      <td width="150">Ceil</td>
    </tr>
  </table>
  <h2>Miscellaneous Functions</h2>
  <table border="0" cellspacing="1" cellpadding="2" bgcolor="#CCCCCC">
    <tr bgcolor="#FFFFFF">
      <td><strong>Description</strong></td>
      <td>&nbsp;</td>
      <td align="center"><strong>Double</strong></td>
      <td align="center"><strong>Complex</strong></td>
      <td align="center"><strong>String</strong></td>
      <td align="center"><strong>Vector</strong></td>
    </tr>
    <tr bgcolor="#FFFFFF"> 
      <td width="225">If</td>
      <td width="91">if(cond, trueval, falseval)</td>
      <td width="76" align="center"><img src="img/checkmark.gif" width="10" height="10" border="0" alt="Check" /></td>
      <td width="81" align="center">&nbsp;</td>
      <td width="91" align="center">&nbsp;</td>
      <td width="91" align="center">&nbsp;</td>
    </tr>
    <tr bgcolor="#FFFFFF"> 
      <td width="225">Absolute Value / Magnitude</td>
      <td width="91">abs(x)</td>
      <td width="76" align="center"><img src="img/checkmark.gif" width="10" height="10" border="0" alt="Check" /></td>
      <td width="81" align="center"><img src="img/checkmark.gif" width="10" height="10" border="0" alt="Check" /></td>
      <td width="91" align="center">&nbsp;</td>
      <td width="91" align="center">&nbsp;</td>
    </tr>
    <tr bgcolor="#FFFFFF"> 
      <td width="225">Random number<br />
      (between 0 and 1)</td>
      <td width="91">rand()</td>
      <td width="76" align="center">&nbsp;</td>
      <td width="81" align="center">&nbsp;</td>
      <td width="91" align="center">&nbsp;</td>
      <td width="91" align="center">&nbsp;</td>
    </tr>
    <tr bgcolor="#FFFFFF"> 
      <td width="225">Modulus</td>
      <td width="91">mod(x,y)<br />
      = x % y</td>
      <td width="76" align="center"><img src="img/checkmark.gif" width="10" height="10" border="0" alt="Check" /></td>
      <td width="81" align="center">&nbsp;</td>
      <td width="91" align="center">&nbsp;</td>
      <td width="91" align="center">&nbsp;</td>
    </tr>
    <tr bgcolor="#FFFFFF"> 
      <td width="225">Square Root</td>
      <td width="91">sqrt(x)</td>
      <td width="76" align="center"><img src="img/checkmark.gif" width="10" height="10" border="0" alt="Check" /></td>
      <td width="81" align="center"><img src="img/checkmark.gif" width="10" height="10" border="0" alt="Check" /></td>
      <td width="91" align="center">&nbsp;</td>
      <td width="91" align="center">&nbsp;</td>
    </tr>
    <tr bgcolor="#FFFFFF"> 
      <td width="225">Sum</td>
      <td width="91">sum(x,y,...)</td>
      <td width="76" align="center"><img src="img/checkmark.gif" width="10" height="10" border="0" alt="Check" /></td>
      <td width="81" align="center"><img src="img/checkmark.gif" width="10" height="10" border="0" alt="Check" /></td>
      <td width="91" align="center"><img src="img/checkmark.gif" width="10" height="10" border="0" alt="Check" /></td>
      <td width="91" align="center">&nbsp;</td>
    </tr>
    <tr bgcolor="#FFFFFF"> 
      <td width="225">Str (number to string)</td>
      <td width="91">str(x)</td>
      <td width="76" align="center"><img src="img/checkmark.gif" width="10" height="10" border="0" alt="Check" /></td>
      <td width="81" align="center"><img src="img/checkmark.gif" width="10" height="10" border="0" alt="Check" /></td>
      <td width="91" align="center"><img src="img/checkmark.gif" width="10" height="10" border="0" alt="Check" /></td>
      <td width="91" align="center"><img src="img/checkmark.gif" width="10" height="10" border="0" alt="Check" /></td>
    </tr>
    <tr bgcolor="#FFFFFF"> 
      <td width="225">Binomial coefficients</td>
      <td width="91">binom(n, i)</td>
      <td width="76" align="center"><img src="img/checkmark.gif" width="10" height="10" border="0" alt="Check" /></td>
      <td width="81" align="center"></td>
      <td width="91" align="center"></td>
      <td width="91" align="center"></td>
    </tr>
  </table>
  <h2>Complex Functions </h2>
  <table border="0" cellspacing="1" cellpadding="2" width="100%" bgcolor="#CCCCCC">
    <tr bgcolor="#FFFFFF"> 
      <td width="225"><strong>Description</strong></td>
      <td width="91">&nbsp;</td>
      <td width="76"><strong>Double</strong></td>
      <td width="81"><strong>Complex</strong></td>
    </tr>
    <tr bgcolor="#FFFFFF"> 
      <td width="225">Real Component</td>
      <td width="91">re(c)</td>
      <td width="76" align="center"><img src="img/checkmark.gif" width="10" height="10" border="0" alt="Check" /></td>
      <td width="81" align="center"><img src="img/checkmark.gif" width="10" height="10" border="0" alt="Check" /></td>
    </tr>
    <tr bgcolor="#FFFFFF"> 
      <td width="225">Imaginary Component</td>
      <td width="91">im(c)</td>
      <td width="76" align="center"><img src="img/checkmark.gif" width="10" height="10" border="0" alt="Check" /></td>
      <td width="81" align="center"><img src="img/checkmark.gif" width="10" height="10" border="0" alt="Check" /></td>
    </tr>
    <tr bgcolor="#FFFFFF"> 
      <td width="225">Complex Modulus (Absolute Value)</td>
      <td width="91">cmod(c)</td>
      <td width="76" align="center"><img src="img/checkmark.gif" width="10" height="10" border="0" alt="Check" /></td>
      <td width="81" align="center"><img src="img/checkmark.gif" width="10" height="10" border="0" alt="Check" /></td>
    </tr>
    <tr bgcolor="#FFFFFF"> 
      <td width="225">Argument (Angle of complex value, in radians)</td>
      <td width="91">arg(c)</td>
      <td width="76" align="center"><img src="img/checkmark.gif" width="10" height="10" border="0" alt="Check" /></td>
      <td width="81" align="center"><img src="img/checkmark.gif" width="10" height="10" border="0" alt="Check" /></td>
    </tr>
    <tr bgcolor="#FFFFFF"> 
      <td width="225">Complex conjugate</td>
      <td width="91">conj(c)</td>
      <td width="76" align="center"><img src="img/checkmark.gif" width="10" height="10" border="0" alt="Check" /></td>
      <td width="81" align="center"><img src="img/checkmark.gif" width="10" height="10" border="0" alt="Check" /></td>
    </tr>
    <tr bgcolor="#FFFFFF"> 
      <td width="225">Complex, constructs a complex number from real and imaginary 
        parts</td>
      <td width="91">complex(x, y)</td>
      <td width="76" align="center"><img src="img/checkmark.gif" width="10" height="10" border="0" alt="Check" /></td>
      <td width="81" align="center">&nbsp;</td>
    </tr>
    <tr bgcolor="#FFFFFF"> 
      <td width="225">Polar, constructs a complex number from modulus and argument</td>
      <td width="91">polar(r, theta)</td>
      <td width="76" align="center"><img src="img/checkmark.gif" width="10" height="10" border="0" alt="Check" /></td>
      <td width="81" align="center">&nbsp;</td>
    </tr>
  </table>
  <!-- #BeginLibraryItem "/Library/top bar.lbi" -->
<div class="topbar"><a href="#top"><img src="img/top.gif" alt="top" name="top" width="38" height="15" id="top" /></a></div>
<!-- #EndLibraryItem --><h2><a name="custom" id="custom"></a>Custom Functions</h2>
  <p>Jep allows you to add custom functions by calling <code>getFunctionTable().addFunction(String 
    name, PostfixMathCommandI function)</code>. Custom functions are no different 
    from built-in functions, so you can use the source code of the built-in functions 
    as a template. The class methods are accessed both during parsing and evaluation. 
    During parsing, the parser needs to know how many parameters are allowed. 
    During evaluation, the <code>run(Stack&lt;Object&gt;)</code> method is called to perform the actual calculation.</p>
  <p>The following is an example of how a custom function can be added.</p>
  <p>Assume you want to add a function &quot;half&quot; to divide a number by 
    two (for demonstration purposes).</p>
  <ol>
    <li>Create a class that extends <a href="../javadoc/com/singularsys/jep/functions/PostfixMathCommand.html">PostfixMathCommand</a> (in the <code>com.singularsys.jep.functions</code>      package). In this example we will name it &quot;Half&quot;</li>
    <li>In the constructor set the number of arguments to be taken. In our case 
      this is one. Do this by writing <code>numberOfParameters = 1;</code><br />
      If you want to allow any number of parameters, initialize the <code>numberOfParameters</code>      value to -1. It is highly recommended to study the <code>Sum.java</code> code as an example 
    of a function that accepts any number of parameters.</li>
    <li> Implement the<code> run(Stack&lt;Object&gt; inStack)</code> method. The parameters are passed in 
      a Stack object. This same stack is used as the output for the function. 
      So we first need to pop the parameter off the stack, calculate the result, 
      and finally pop the result back on the stack. 
      <pre class="codebox">public void run(Stack&lt;Object&gt; inStack) throws EvaluationException {

   <span class="comment">// check the stack</span>
   checkStack(inStack);

   <span class="comment">// get the parameter from the stack</span>
   Object param = inStack.pop();

   <span class="comment">// check whether the argument is of the right type
</span>   if (param instanceof Double) {
      <span class="comment">// calculate the result</span>
      double r = ((Double)param).doubleValue() / 2;
      <span class="comment">// push the result on the inStack</span>
      inStack.push(new Double(r)); 
   } else {
      throw new EvaluationException(&quot;Invalid parameter type&quot;);
   }
}</pre>
    </li>
    <li>In your main program or applet that is using the parser, add the new function. 
      Do this by writing<br />
      <pre class="codebox">jep.getFunctionTable().addFunction(&quot;half&quot;, new Half());</pre>
    </li>
    <li>If numberOfParameters == -1 you may wish to overwrite the <code>boolean 
      checkNumberOfParameters(int n)</code> to catch an illegal number of arguments 
      at parse time.</li>
  </ol>
  <p><b>Source files</b></p>
  <ul>
    <li><a href="CustFunc.java">CustFunc.java</a> (a testing class)</li>
    <li><a href="Half.java">Half.java</a> (the Half function class)</li>
  </ul>
  <!-- #EndEditable -->




<!-- FOOTER ========================================================== -->
  <div id="footer"> <a href="http://www.singularsys.com/jep/dist-bugreport.php">Report 
    bugs / documentation errors</a><br/>
<br/>
    &copy; 2008 <a href="http://www.singularsys.com" target="_blank">Singular 
    Systems</a> </div>
</div> <!-- centercontent -->

</body>
<!-- #EndTemplate --></html>
